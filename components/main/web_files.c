#include <stddef.h>

// Compact single-line provisioning UI to reduce binary size.
const char index_html[] = "<!doctype html><html><head><meta name='viewport' content='width=device-width,initial-scale=1'><title>AS3935</title><style>body{font-family:Arial,sans-serif;padding:12px}label{display:block;margin:6px 0}input,select,textarea,button{width:100%;padding:8px;margin-top:4px}pre{white-space:pre-wrap;background:#f4f4f4;padding:8px;border-radius:4px}</style></head><body><h3>Wi-Fi</h3><div id='st'>Loading...</div><form id='wf'><label>SSID<input id='s'></label><label>Password<input id='p' type='password'></label><button>Save</button></form><h3>MQTT</h3><form id='mf'><label>Broker host<input id='mh' placeholder='hostname or IP'></label><label>Port<input id='mp' type='number' placeholder='1883'></label><label><input id='mtls' type='checkbox'> Use TLS (mqtts)</label><label>Username<input id='muser'></label><label>Password<input id='mpass' type='password' placeholder='leave blank to keep'></label><label>Topic(s)<input id='mtop' placeholder='topic or comma-separated topics'></label><button>Save</button></form><h3>AS3935</h3><div><button id='ld'>Load</button></div><label>Sensor ID<select id='sid'><option value='1'>Sensor 1</option><option value='2'>Sensor 2</option><option value='3'>Sensor 3</option></select></label><button id='sv'>Save</button><pre id='r'></pre><h3>Events</h3><pre id='log'>connecting...</pre><script>async function fetchJson(u,o){try{let r=await fetch(u,o);return await r.json()}catch(e){return null}};async function s(){let j=await fetchJson('/api/wifi/status');document.getElementById('st').innerText=JSON.stringify(j||{});let m=await fetchJson('/api/mqtt/status');if(m){try{if(m.uri){let u=new URL(m.uri);document.getElementById('mh').value=u.hostname;document.getElementById('mp').value=u.port|| (u.protocol==='mqtts:'?8883:1883);document.getElementById('mtls').checked = (u.protocol==='mqtts:' || m.use_tls==='true' || m.use_tls===true);} }catch(e){} document.getElementById('muser').value = m.username||''; document.getElementById('mtop').value = m.topic||'';} try{let a = await fetchJson('/api/as3935/status'); if(a && a.sensor_id) document.getElementById('sid').value = String(a.sensor_id); else document.getElementById('sid').value='1'; }catch(e){} } s();document.getElementById('wf').addEventListener('submit',async e=>{e.preventDefault();let body={ssid:document.getElementById('s').value,password:document.getElementById('p').value};await fetch('/api/wifi/save',{method:'POST',body:JSON.stringify(body),headers:{'Content-Type':'application/json'}});alert('Saved')});document.getElementById('mf').addEventListener('submit',async e=>{e.preventDefault();let host=document.getElementById('mh').value,port=document.getElementById('mp').value,proto=document.getElementById('mtls').checked ? 'mqtts' : 'mqtt';let uri = host ? (proto+'://'+host + (port?(':'+port):'')) : '';let body={uri:uri, use_tls: document.getElementById('mtls').checked, topic:document.getElementById('mtop').value};let user=document.getElementById('muser').value, pass=document.getElementById('mpass').value; if(user) body.username=user; if(pass) body.password=pass; await fetch('/api/mqtt/save',{method:'POST',body:JSON.stringify(body),headers:{'Content-Type':'application/json'}});alert('Saved')});document.getElementById('ld').addEventListener('click',async ()=>{let t=await fetch('/api/as3935/status');let txt=await t.text();document.getElementById('r').innerText=txt});document.getElementById('sv').addEventListener('click',async ()=>{let sid=document.getElementById('sid').value; if(!sid) return; let body=JSON.stringify({sensor_id: Number(sid)}); await fetch('/api/as3935/save',{method:'POST',body:body,headers:{'Content-Type':'application/json'}});alert('Saved')});(function(){try{var es=new EventSource('/api/events/stream');var log=document.getElementById('log');es.onmessage=e=>{log.innerText+=e.data+'\\n'};es.addEventListener('lightning',e=>{log.innerText+='[L] '+e.data+'\\n'})}catch(e){document.getElementById('log').innerText='events unavailable'}})()</script></body></html>";
const size_t index_html_len = sizeof(index_html) - 1;
